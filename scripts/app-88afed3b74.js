!function(){"use strict";angular.module("asylumjourneyFrontend",["ngAnimate","ngCookies","ngTouch","ngSanitize","ngMessages","ngAria","ngResource","ngRoute","ngDialog"])}(),function(){"use strict";function e(e){function t(){return e(a+"services")}function i(){return e(a+"providers")}function r(){return e(a+"stages")}function s(){return e(a+"categories")}function n(){return e(a+"service-users")}function o(){return e(a+"issues")}var a="http://asylum-journey-dev.herokuapp.com/";this.services=t,this.providers=i,this.stages=r,this.categories=s,this.serviceUsers=n,this.issues=o}e.$inject=["$resource"],angular.module("asylumjourneyFrontend").service("data",e)}(),function(){"use strict";function e(){var e={templateUrl:"app/components/overview/overview.html",restrict:"AE"};return e}angular.module("asylumjourneyFrontend").directive("overview",e)}(),function(){"use strict";function e(e){function t(){i(),r(),s(),n()}function i(){e.services().get().$promise.then(function(e){g.services=e._embedded.services,g.showLoader=!1})}function r(){e.providers().get().$promise.then(function(e){g.providers=e._embedded.providers})}function s(){e.stages().get().$promise.then(function(e){g.stages=e._embedded.stages,angular.forEach(g.stages,function(e){e.display=!0})})}function n(){e.categories().get().$promise.then(function(e){g.categories=e._embedded.categories,angular.forEach(g.categories,function(e){e.display=!0})})}function o(e,t,i){var r=t.indexOf(e);return-1===r?void t.push(e):(t.splice(r,1),void(t.length||g.resetFilters(t,i)))}function a(e,t){e.display=t,e.filtered=t}function l(e,t,i){g.filtered=!0,angular.forEach(i,function(i){return i.id===e?void a(i,-1===t.indexOf(e)):void(-1===t.indexOf(i.id)&&a(i,!1))}),o(e,t,i)}function c(e){angular.forEach(e,function(e){e.display=!0,e.filtered=!1})}var g=this,u=[],d=[];g.services=[],g.filtered=!1,g.showCategoryFilters=!1,g.showStageFilters=!1,g.showLoader=!0,t(),g.filterStage=function(e){l(e,d,g.stages)},g.filterCategory=function(e){l(e,u,g.categories)},g.toggleIssues=function(){g.showIssues=!g.showIssues},g.resetFilters=function(e,t){c(t),e=[]},g.resetAll=function(){c(g.stages),c(g.categories),u=[],d=[],g.showIssues=!1},g.expandCategoryFilters=function(e){g.showCategoryFilters=!e},g.expandStageFilters=function(e){g.showStageFilters=!e},g.closeFilters=function(){g.showCategoryFilters=!1,g.showStageFilters=!1}}e.$inject=["data"],angular.module("asylumjourneyFrontend").controller("OverviewController",e)}(),function(){"use strict";function e(){var e={templateUrl:"app/components/filters/filters.html",restrict:"AE"};return e}angular.module("asylumjourneyFrontend").directive("filters",e)}(),function(){"use strict";function e(){var e={templateUrl:"app/components/card/card.html",restrict:"AE",controller:"CardController",scope:{service:"="}};return e}angular.module("asylumjourneyFrontend").directive("card",e)}(),function(){"use strict";function e(e,t){var i=this;i.service=e.service,i.openDialog=function(){t.open({template:"app/components/detail-overlay/detail.html",scope:e})}}e.$inject=["$scope","ngDialog"],angular.module("asylumjourneyFrontend").controller("CardController",e)}(),function(){"use strict";function e(){}angular.module("asylumjourneyFrontend").controller("MainController",e)}(),function(){"use strict";function e(){return function(e,t){var i=[];return angular.forEach(e,function(e){angular.forEach(e._embedded.stages,function(r){r.id===t&&i.push(e)})}),i}}angular.module("asylumjourneyFrontend").filter("stage",e)}(),function(){"use strict";function e(){return function(e,t){var i=[];return angular.forEach(e,function(e){angular.forEach(e._embedded.categories,function(r){r.id===t&&i.push(e)})}),i}}angular.module("asylumjourneyFrontend").filter("category",e)}(),function(){"use strict";function e(e){e.debug("runBlock end")}e.$inject=["$log"],angular.module("asylumjourneyFrontend").run(e)}(),function(){"use strict";function e(e){e.when("/",{templateUrl:"app/main/main.html",controller:"MainController",controllerAs:"main"}).otherwise({redirectTo:"/"})}e.$inject=["$routeProvider"],angular.module("asylumjourneyFrontend").config(e)}(),function(){"use strict";angular.module("asylumjourneyFrontend").constant("moment",moment)}(),function(){"use strict";function e(e){e.debugEnabled(!0)}e.$inject=["$logProvider"],angular.module("asylumjourneyFrontend").config(e)}(),angular.module("asylumjourneyFrontend").run(["$templateCache",function(e){e.put("app/main/main.html",'<div class="container"><overview></overview></div>'),e.put("app/components/card/card.html",'<a ng-controller="CardController as card" href="#/" ng-click="card.openDialog()" class="card"><svg class="icon icon-warning" ng-if="card.service._embedded.issues.length"><use xlink:href="#icon-warning"></use></svg><h3>{{ card.service.name }}</h3></a>'),e.put("app/components/filters/filters.html",'<div class="filters"><div class="filter"><button type="button" class="filter__toggle" ng-class="{ \'filter__toggle--active\': overview.showIssues}" ng-click="overview.toggleIssues()"><svg class="icon icon-warning"><use xlink:href="#icon-warning"></use></svg>Gaps/issues</button></div><div class="filter"><button type="button" class="filter__toggle" ng-click="overview.expandStageFilters(overview.showStageFilters)">Stage</button><ul class="filter__list" ng-show="overview.showStageFilters"><li ng-repeat="stage in overview.stages"><button type="button" class="filter__button" ng-class="{ \'filter__toggle--active\': stage.filtered}" ng-click="overview.filterStage(stage.id)">{{stage.name}} <span ng-if="stage.filtered">FILTERED</span></button></li></ul></div><div class="filter"><button type="button" class="filter__toggle" ng-click="overview.expandCategoryFilters(overview.showCategoryFilters)">Category</button><ul class="filter__list" ng-show="overview.showCategoryFilters"><li ng-repeat="category in overview.categories"><button type="button" class="filter__button" ng-class="{ \'filter__toggle--active\': category.filtered}" ng-click="overview.filterCategory(category.id)">{{category.name}} <span ng-if="category.filtered">FILTERED</span></button></li></ul></div><button type="button" ng-click="overview.resetAll()">Reset</button></div><div class="filters__overlay" ng-show="overview.showStageFilters || overview.showCategoryFilters" ng-click="overview.closeFilters()"></div>'),e.put("app/components/detail-overlay/detail.html",'<article class="details"><h2 class="details__heading"><span ng-if="service._embedded.issues" class="details__alert"><svg class="icon icon-warning"><use xlink:href="#icon-warning"></use></svg><i>Warning</i></span> {{ service.name }}</h2><ul class="tag-list"><li ng-repeat="stage in service._embedded.stages" class="tag-list__tag tag-list__tag--stage-{{ stage.id }}">{{ stage.name }}</li><li ng-repeat="category in service._embedded.categories" class="tag-list__tag">{{ category.name }}</li><li ng-repeat="serviceUser in service._embedded.serviceUsers" class="tag-list__tag">{{ serviceUser.name }}</li></ul><p>{{ service.description }}</p><p ng-if="service.endDate"><strong>End Date:</strong> {{ service.endDate | date }}</p><div ng-if="service._embedded.issues"><h3 class="details__sub-heading">Gaps or issues</h3><p ng-repeat="issue in service._embedded.issues">{{ issue.name }}</p></div><div ng-if="service._embedded.providers"><h3 class="details__sub-heading">Providers</h3><div ng-repeat="provider in service._embedded.providers" class="details__provider"><h4 class="details__service-name">{{ provider.name }}</h4><p>{{ provider.description }}</p><p ng-if="provider.phone"><strong>Tel:</strong> {{ provider.phone }}</p><p ng-if="provider.email"><strong>Email:</strong> <a href="mailto:{{ provider.email }}">{{ provider.email }}</a></p><p ng-if="provider.website"><strong>Website:</strong> <a href="{{ provider.website }}">{{ provider.website }}</a></p><p ng-if="provider.address"><strong>Address:</strong> {{ provider.address }}, {{ provider.postcode }}</p></div></div></article>'),e.put("app/components/overview/overview.html",'<div ng-controller="OverviewController as overview" class="overview"><ul class="overview-stages"><li class="overview-stages__stage"></li><li ng-if="stage.display" ng-repeat="stage in overview.stages" class="overview-stages__stage overview-stages__stage--{{stage.id}}"><span>{{stage.name}}</span></li></ul><img ng-src="images/loader-logo.svg" alt="Loading"><div ng-if="overview.showLoader">Loading</div><div ng-if="category.display && !overview.showLoader" ng-repeat="category in overview.categories" class="overview-category"><h2 class="overview-category__heading">{{category.name}}</h2><ul ng-if="stage.display" class="overview-category__stage overview-category__stage--{{stage.id}}" ng-repeat="stage in overview.stages"><li ng-repeat="service in overview.services | category: category.id | stage: stage.id"><card service="service" ng-if="!overview.showIssues || service._embedded.issues.length"></card></li></ul></div><filters></filters></div>')}]);
//# sourceMappingURL=../maps/scripts/app-88afed3b74.js.map
