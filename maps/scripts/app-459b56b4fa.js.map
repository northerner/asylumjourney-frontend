{"version":3,"sources":["scripts/app-459b56b4fa.js"],"names":["angular","module","data","$resource","services","url","providers","stages","categories","serviceUsers","issues","this","$inject","service","overview","templateUrl","restrict","directive","OverviewController","activate","getServices","getProviders","getStages","getCategories","get","$promise","then","response","vm","_embedded","forEach","stage","display","itemCategory","updateFilteredArray","filteredId","array","list","index","indexOf","push","splice","length","resetFilters","updateFilteredItem","item","filter","filtered","filterItems","filterId","filteredArray","id","resetFilter","filteredCategories","filteredStages","showCategoryFilters","showStageFilters","filterStage","stageId","filterCategory","resetAll","expandCategoryFilters","a","expandStageFilters","controller","filters","card","scope","CardController","$scope","ngDialog","openDialog","open","template","MainController","items","itemStage","category","runBlock","$log","debug","run","routeConfig","$routeProvider","when","controllerAs","otherwise","redirectTo","config","constant","moment","$logProvider","debugEnabled","$templateCache","put"],"mappings":"CAAA,WACE,YAEAA,SACGC,OAAO,yBAA0B,YAAa,YAAa,UAAW,aAAc,aAAc,SAAU,aAAc,UAAW,gBAI1I,WACC,YAMA,SAASC,GAAKC,GAab,QAASC,KACR,MAAOD,GAAUE,EAAM,YAGxB,QAASC,KACR,MAAOH,GAAUE,EAAM,aAGxB,QAASE,KACR,MAAOJ,GAAUE,EAAM,UAGxB,QAASG,KACR,MAAOL,GAAUE,EAAM,cAGxB,QAASI,KACR,MAAON,GAAUE,EAAM,iBAGxB,QAASK,KACR,MAAOP,GAAUE,EAAM,UAhCxB,GAAIA,GAAM,0CAEVM,MAAKP,SAAWA,EAChBO,KAAKL,UAAYA,EACjBK,KAAKJ,OAASA,EACdI,KAAKH,WAAaA,EAClBG,KAAKF,aAAeA,EACpBE,KAAKD,OAASA,EAbfR,EAAKU,SAAW,aAAhBZ,QACEC,OAAO,yBACPY,QAAQ,OAAQX,MAyCnB,WACE,YAMA,SAASY,KACP,GAAIA,IACFC,YAAa,wCACbC,SAAU,KAEZ,OAAOF,GATTd,QACGC,OAAO,yBACPgB,UAAU,WAAYH,MAW3B,WACE,YAME,SAASI,GAAmBhB,GAYxB,QAASiB,KACLC,IACAC,IACAC,IACAC,IAGJ,QAASH,KACLlB,EAAKE,WAAWoB,MAAMC,SAASC,KAAK,SAASC,GACrDC,EAAGxB,SAAWuB,EAASE,UAAUzB,WAI7B,QAASiB,KACLnB,EAAKI,YAAYkB,MAAMC,SAASC,KAAK,SAASC,GACtDC,EAAGtB,UAAYqB,EAASE,UAAUvB,YAI9B,QAASgB,KACLpB,EAAKK,SAASiB,MAAMC,SAASC,KAAK,SAASC,GACnDC,EAAGrB,OAASoB,EAASE,UAAUtB,OAEnBP,QAAQ8B,QAAQF,EAAGrB,OAAQ,SAASwB,GAChCA,EAAMC,SAAU,MAM5B,QAAST,KACLrB,EAAKM,aAAagB,MAAMC,SAASC,KAAK,SAASC,GACvDC,EAAGpB,WAAamB,EAASE,UAAUrB,WAEvBR,QAAQ8B,QAAQF,EAAGpB,WAAY,SAASyB,GACpCA,EAAaD,SAAU,MAMnC,QAASE,GAAoBC,EAAYC,EAAOC,GAC5C,GAAIC,GAAQF,EAAMG,QAAQJ,EAE1B,OAAc,KAAVG,MACAF,GAAMI,KAAKL,IAIfC,EAAMK,OAAOH,EAAO,QAEfF,EAAMM,QACPd,EAAGe,aAAaP,EAAOC,KAI/B,QAASO,GAAmBC,EAAMC,GAC9BD,EAAKb,QAAUc,EACfD,EAAKE,SAAWD,EAGpB,QAASE,GAAYC,EAAUC,EAAeb,GAC1CT,EAAGmB,UAAW,EAEd/C,QAAQ8B,QAAQO,EAAM,SAASQ,GAE3B,MAAIA,GAAKM,KAAOF,MACZL,GAAmBC,EAA0C,KAApCK,EAAcX,QAAQU,SAIZ,KAAnCC,EAAcX,QAAQM,EAAKM,KAI/BP,EAAmBC,GAAM,MAI7BX,EAAoBe,EAAUC,EAAeb,GAGjD,QAASe,GAAaf,GAClBrC,QAAQ8B,QAAQO,EAAM,SAASQ,GAC3BA,EAAKb,SAAU,EACfa,EAAKE,UAAW,IAhGxB,GAAInB,GAAKjB,KACL0C,KACAC,IAEJ1B,GAAGxB,YACHwB,EAAGmB,UAAW,EACdnB,EAAG2B,qBAAsB,EACzB3B,EAAG4B,kBAAmB,EAEtBrC,IA2FAS,EAAG6B,YAAc,SAASC,GACtBV,EAAYU,EAASJ,EAAgB1B,EAAGrB,SAI5CqB,EAAG+B,eAAiB,SAASV,GACzBD,EAAYC,EAAUI,EAAoBzB,EAAGpB,aAGjDoB,EAAGe,aAAe,SAASP,EAAOC,GAC9Be,EAAYf,GACZD,MAGJR,EAAGgC,SAAW,WACVR,EAAYxB,EAAGrB,QACf6C,EAAYxB,EAAGpB,YACf6C,KACAC,MAGJ1B,EAAGiC,sBAAwB,SAASC,GAChClC,EAAG2B,qBAAuBO,GAG9BlC,EAAGmC,mBAAqB,SAASD,GAC7BlC,EAAG4B,kBAAoBM,GAlI/B5C,EAAmBN,SAAW,QADhCZ,QACCC,OAAO,yBACP+D,WAAW,qBAAsB9C,MAyIpC,WACE,YAMA,SAAS+C,KACP,GAAIA,IACFlD,YAAa,sCACbC,SAAU,KAEZ,OAAOiD,GATTjE,QACGC,OAAO,yBACPgB,UAAU,UAAWgD,MAW1B,WACC,YAMA,SAASC,KACR,GAAIA,IACHnD,YAAa,gCACbC,SAAU,KACVgD,WAAY,iBACZG,OACEtD,QAAS,KAGZ,OAAOqD,GAbRlE,QACEC,OAAO,yBACPgB,UAAU,OAAQiD,MAerB,WACE,YAME,SAASE,GAAeC,EAAQC,GAC5B,GAAI1C,GAAKjB,IACTiB,GAAGf,QAAUwD,EAAOxD,QAEpBe,EAAG2C,WAAa,WACZD,EAASE,MACLC,SAAU,4CACVN,MAAOE,KATnBD,EAAexD,SAAW,SAAU,YAFtCZ,QACCC,OAAO,yBACP+D,WAAW,iBAAkBI,MAgBhC,WACE,YAOA,SAASM,MALT1E,QACGC,OAAO,yBACP+D,WAAW,iBAAkBU,MAOlC,WACC,YAMA,SAAS3C,KAER,MAAO,UAAqB4C,EAAO5C,GAClC,GAAIgB,KASJ,OAPA/C,SAAQ8B,QAAQ6C,EAAO,SAAS9B,GAC/B7C,QAAQ8B,QAAQe,EAAKhB,UAAUtB,OAAQ,SAASqE,GAC3CA,EAAUzB,KAAOpB,GACpBgB,EAASP,KAAKK,OAIVE,GAhBT/C,QACEC,OAAO,yBACP6C,OAAO,QAASf,MAmBnB,WACC,YAMA,SAAS8C,KAER,MAAO,UAAwBF,EAAOE,GACrC,GAAI9B,KAUJ,OARA/C,SAAQ8B,QAAQ6C,EAAO,SAAS9B,GAC/B7C,QAAQ8B,QAAQe,EAAKhB,UAAUrB,WAAY,SAASyB,GAC/CA,EAAakB,KAAO0B,GACvB9B,EAASP,KAAKK,OAKVE,GAjBT/C,QACEC,OAAO,yBACP6C,OAAO,WAAY+B,MAoBtB,WACE,YAOA,SAASC,GAASC,GAEhBA,EAAKC,MAAM,gBAJbF,EAASlE,SAAW,QAHpBZ,QACGC,OAAO,yBACPgF,IAAIH,MAUT,WACE,YAMA,SAASI,GAAYC,GACnBA,EACGC,KAAK,KACJrE,YAAa,qBACbiD,WAAY,iBACZqB,aAAc,SAEfC,WACCC,WAAY,MARlBL,EAAYtE,SAAW,kBAJvBZ,QACGC,OAAO,yBACPuF,OAAON,MAiBZ,WACE,YAEAlF,SACGC,OAAO,yBACPwF,SAAS,SAAUC,WAIxB,WACE,YAOA,SAASF,GAAOG,GAEdA,EAAaC,cAAa,GAF5BJ,EAAO5E,SAAW,gBALlBZ,QACGC,OAAO,yBACPuF,OAAOA,MAUZxF,QAAQC,OAAO,yBAAyBgF,KAAK,iBAAkB,SAASY,GAAiBA,EAAeC,IAAI,qBAAqB,sDACjID,EAAeC,IAAI,gCAAgC,sIACnDD,EAAeC,IAAI,4CAA4C,kjDAC/DD,EAAeC,IAAI,sCAAsC,q8BACzDD,EAAeC,IAAI,wCAAwC","file":"scripts/app-459b56b4fa.js","sourcesContent":["(function() {\n  'use strict';\n\n  angular\n    .module('asylumjourneyFrontend', ['ngAnimate', 'ngCookies', 'ngTouch', 'ngSanitize', 'ngMessages', 'ngAria', 'ngResource', 'ngRoute', 'ngDialog']);\n\n})();\n\n(function () {\n\t'use strict';\n\n\tangular\n\t\t.module('asylumjourneyFrontend')\n\t\t.service('data', data);\n\n\tfunction data($resource) {\n\n\t\tvar url = 'http://asylum-journey-dev.herokuapp.com/';\n\n\t\tthis.services = services;\n\t\tthis.providers = providers;\n\t\tthis.stages = stages;\n\t\tthis.categories = categories;\n\t\tthis.serviceUsers = serviceUsers;\n\t\tthis.issues = issues;\n\n\t\t///////////\n\n\t\tfunction services() {\n\t\t\treturn $resource(url + 'services');\n\t\t}\n\n\t\tfunction providers() {\n\t\t\treturn $resource(url + 'providers');\n\t\t}\n\n\t\tfunction stages() {\n\t\t\treturn $resource(url + 'stages');\n\t\t}\n\n\t\tfunction categories() {\n\t\t\treturn $resource(url + 'categories');\n\t\t}\n\n\t\tfunction serviceUsers() {\n\t\t\treturn $resource(url + 'service-users');\n\t\t}\n\n\t\tfunction issues() {\n\t\t\treturn $resource(url + 'issues');\n\t\t}\n\t}\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('asylumjourneyFrontend')\n    .directive('overview', overview);\n\n  function overview() {\n    var overview = {\n      templateUrl: 'app/components/overview/overview.html',\n      restrict: 'AE'\n    };\n    return overview;\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n  .module('asylumjourneyFrontend')\n  .controller('OverviewController', OverviewController);\n\n    function OverviewController(data) {\n        var vm = this;\n        var filteredCategories = [];\n        var filteredStages = [];\n\n        vm.services = [];\n        vm.filtered = false;\n        vm.showCategoryFilters = false;\n        vm.showStageFilters = false;\n\n        activate();\n\n        function activate() {\n            getServices();\n            getProviders();\n            getStages();\n            getCategories();\n        }\n\n        function getServices() {\n            data.services().get().$promise.then(function(response) {\n\t\t\t\tvm.services = response._embedded.services;\n\t\t\t});\n        }\n\n        function getProviders() {\n            data.providers().get().$promise.then(function(response) {\n\t\t\t\tvm.providers = response._embedded.providers;\n\t\t\t});\n        }\n\n        function getStages() {\n            data.stages().get().$promise.then(function(response) {\n\t\t\t\tvm.stages = response._embedded.stages;\n\n                angular.forEach(vm.stages, function(stage) {\n                    stage.display = true;\n                });\n\n\t\t\t});\n\t\t}\n\n        function getCategories() {\n            data.categories().get().$promise.then(function(response) {\n\t\t\t\tvm.categories = response._embedded.categories;\n\n                angular.forEach(vm.categories, function(itemCategory) {\n                    itemCategory.display = true;\n                });\n\n\t\t\t});\n\t\t}\n\n        function updateFilteredArray(filteredId, array, list) {\n            var index = array.indexOf(filteredId);\n\n            if (index === -1) {\n                array.push(filteredId);\n                return;\n            }\n\n            array.splice(index, 1);\n\n            if (!array.length) {\n                vm.resetFilters(array, list);\n            }\n        }\n\n        function updateFilteredItem(item, filter) {\n            item.display = filter;\n            item.filtered = filter;\n        }\n\n        function filterItems(filterId, filteredArray, list) {\n            vm.filtered = true;\n\n            angular.forEach(list, function(item) {\n\n                if (item.id === filterId) {\n                    updateFilteredItem(item, filteredArray.indexOf(filterId) === -1);\n                    return;\n                }\n\n                if (filteredArray.indexOf(item.id) !== -1) {\n                    return;\n                }\n\n                updateFilteredItem(item, false);\n\n            });\n\n            updateFilteredArray(filterId, filteredArray, list);\n        }\n\n        function resetFilter (list) {\n            angular.forEach(list, function(item) {\n                item.display = true;\n                item.filtered = false;\n            });\n        }\n\n        vm.filterStage = function(stageId) {\n            filterItems(stageId, filteredStages, vm.stages);\n        };\n\n\n        vm.filterCategory = function(filterId) {\n            filterItems(filterId, filteredCategories, vm.categories);\n        };\n\n        vm.resetFilters = function(array, list) {\n            resetFilter(list);\n            array = [];\n        };\n\n        vm.resetAll = function () {\n            resetFilter(vm.stages);\n            resetFilter(vm.categories);\n            filteredCategories = [];\n            filteredStages = [];\n        };\n\n        vm.expandCategoryFilters = function(a) {\n            vm.showCategoryFilters = !a;\n        };\n\n        vm.expandStageFilters = function(a) {\n            vm.showStageFilters = !a;\n        };\n\n    }\n\n})();\n\n\n(function() {\n  'use strict';\n\n  angular\n    .module('asylumjourneyFrontend')\n    .directive('filters', filters);\n\n  function filters() {\n    var filters = {\n      templateUrl: 'app/components/filters/filters.html',\n      restrict: 'AE'\n    };\n    return filters;\n  }\n})();\n\n(function() {\n\t'use strict';\n\n\tangular\n\t\t.module('asylumjourneyFrontend')\n\t\t.directive('card', card);\n\n\tfunction card() {\n\t\tvar card = {\n\t\t\ttemplateUrl: 'app/components/card/card.html',\n\t\t\trestrict: 'AE',\n\t\t\tcontroller: 'CardController',\n\t\t\tscope: {\n\t\t\t\t\tservice: '='\n\t\t\t}\n\t\t};\n\t\treturn card;\n\t}\n})();\n\n(function() {\n  'use strict';\n\n  angular\n  .module('asylumjourneyFrontend')\n  .controller('CardController', CardController);\n\n    function CardController($scope, ngDialog) {\n        var vm = this;\n        vm.service = $scope.service;\n\n        vm.openDialog = function () {\n            ngDialog.open({\n                template: 'app/components/detail-overlay/detail.html',\n                scope: $scope\n            });\n        }\n    }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('asylumjourneyFrontend')\n    .controller('MainController', MainController);\n\n  /** @ngInject */\n  function MainController() {\n  }\n})();\n\n(function () {\n\t'use strict';\n\n\tangular\n\t\t.module('asylumjourneyFrontend')\n\t\t.filter('stage', stage);\n\n\tfunction stage() {\n\n\t\treturn function stageFilter(items, stage) {\n\t\t\tvar filtered = [];\n\n\t\t\tangular.forEach(items, function(item) {\n\t\t\t\tangular.forEach(item._embedded.stages, function(itemStage) {\n\t\t\t\t\tif (itemStage.id === stage) {\n\t\t\t\t\t\tfiltered.push(item);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\treturn filtered;\n\t\t}\n\t}\n})();\n\n(function () {\n\t'use strict';\n\n\tangular\n\t\t.module('asylumjourneyFrontend')\n\t\t.filter('category', category);\n\n\tfunction category() {\n\n\t\treturn function categoryFilter(items, category) {\n\t\t\tvar filtered = [];\n\n\t\t\tangular.forEach(items, function(item) {\n\t\t\t\tangular.forEach(item._embedded.categories, function(itemCategory) {\n\t\t\t\t\tif (itemCategory.id === category) {\n\t\t\t\t\t\tfiltered.push(item);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn filtered;\n\t\t}\n\t}\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('asylumjourneyFrontend')\n    .run(runBlock);\n\n  /** @ngInject */\n  function runBlock($log) {\n\n    $log.debug('runBlock end');\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('asylumjourneyFrontend')\n    .config(routeConfig);\n\n  function routeConfig($routeProvider) {\n    $routeProvider\n      .when('/', {\n        templateUrl: 'app/main/main.html',\n        controller: 'MainController',\n        controllerAs: 'main'\n      })\n      .otherwise({\n        redirectTo: '/'\n      });\n  }\n\n})();\n\n/* global moment:false */\n(function() {\n  'use strict';\n\n  angular\n    .module('asylumjourneyFrontend')\n    .constant('moment', moment);\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('asylumjourneyFrontend')\n    .config(config);\n\n  /** @ngInject */\n  function config($logProvider) {\n    // Enable log\n    $logProvider.debugEnabled(true);\n  }\n\n})();\n\nangular.module(\"asylumjourneyFrontend\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/main/main.html\",\"<div class=\\\"container\\\"><overview></overview></div>\");\n$templateCache.put(\"app/components/card/card.html\",\"<a ng-controller=\\\"CardController as card\\\" href=\\\"#/\\\" ng-click=\\\"card.openDialog()\\\" class=\\\"card\\\"><h3>{{ card.service.name }}</h3></a>\");\n$templateCache.put(\"app/components/detail-overlay/detail.html\",\"<article class=\\\"details\\\"><h2 class=\\\"details__heading\\\"><span ng-if=\\\"service._embedded.issues\\\" class=\\\"details__alert\\\"><svg class=\\\"icon icon-warning\\\"><use xlink:href=\\\"#icon-warning\\\"></use></svg><i>Warning</i></span> {{ service.name }}</h2><ul class=\\\"tag-list\\\"><li ng-repeat=\\\"stage in service._embedded.stages\\\" class=\\\"tag-list__tag tag-list__tag--stage-{{ stage.id }}\\\">{{ stage.name }}</li><li ng-repeat=\\\"category in service._embedded.categories\\\" class=\\\"tag-list__tag\\\">{{ category.name }}</li><li ng-repeat=\\\"serviceUser in service._embedded.serviceUsers\\\" class=\\\"tag-list__tag\\\">{{ serviceUser.name }}</li></ul><p>{{ service.description }}</p><p ng-if=\\\"service.endDate\\\"><strong>End Date:</strong> {{ service.endDate | date }}</p><div ng-if=\\\"service._embedded.issues\\\"><h3 class=\\\"details__sub-heading\\\">Gaps or issues</h3><p ng-repeat=\\\"issue in service._embedded.issues\\\">{{ issue.name }}</p></div><div ng-if=\\\"service._embedded.providers\\\"><h3 class=\\\"details__sub-heading\\\">Providers</h3><div ng-repeat=\\\"provider in service._embedded.providers\\\" class=\\\"details__provider\\\"><h4 class=\\\"details__service-name\\\">{{ provider.name }}</h4><p>{{ provider.description }}</p><p ng-if=\\\"provider.phone\\\"><strong>Tel:</strong> {{ provider.phone }}</p><p ng-if=\\\"provider.email\\\"><strong>Email:</strong> <a href=\\\"mailto:{{ provider.email }}\\\">{{ provider.email }}</a></p><p ng-if=\\\"provider.website\\\"><strong>Website:</strong> <a href=\\\"{{ provider.website }}\\\">{{ provider.website }}</a></p><p ng-if=\\\"provider.address\\\"><strong>Address:</strong> {{ provider.address }}, {{ provider.postcode }}</p></div></div></article>\");\n$templateCache.put(\"app/components/filters/filters.html\",\"<div class=\\\"filters\\\"><div class=\\\"filter\\\"><button type=\\\"button\\\" class=\\\"filter__toggle\\\" ng-click=\\\"overview.expandStageFilters(overview.showStageFilters)\\\">Stage</button><ul class=\\\"filter__list\\\" ng-show=\\\"overview.showStageFilters\\\"><li ng-repeat=\\\"stage in overview.stages\\\"><button type=\\\"button\\\" class=\\\"filter__button\\\" ng-click=\\\"overview.filterStage(stage.id)\\\">{{stage.name}} <span ng-if=\\\"stage.filtered\\\">FILTERED</span></button></li></ul></div><div class=\\\"filter\\\"><button type=\\\"button\\\" class=\\\"filter__toggle\\\" ng-click=\\\"overview.expandCategoryFilters(overview.showCategoryFilters)\\\">Category</button><ul class=\\\"filter__list\\\" ng-show=\\\"overview.showCategoryFilters\\\"><li ng-repeat=\\\"category in overview.categories\\\"><button type=\\\"button\\\" class=\\\"filter__button\\\" ng-click=\\\"overview.filterCategory(category.id)\\\">{{category.name}} <span ng-if=\\\"category.filtered\\\">FILTERED</span></button></li></ul></div><button type=\\\"button\\\" ng-click=\\\"overview.resetAll()\\\">Reset</button></div>\");\n$templateCache.put(\"app/components/overview/overview.html\",\"<div ng-controller=\\\"OverviewController as overview\\\" class=\\\"overview\\\"><ul class=\\\"overview-stages\\\"><li class=\\\"overview-stages__stage\\\"></li><li ng-if=\\\"stage.display\\\" ng-repeat=\\\"stage in overview.stages\\\" class=\\\"overview-stages__stage overview-stages__stage--{{stage.id}}\\\">{{stage.name}}</li></ul><div ng-if=\\\"category.display\\\" ng-repeat=\\\"category in overview.categories\\\" class=\\\"overview-category\\\"><h2 class=\\\"overview-category__heading\\\">{{category.name}}</h2><ul ng-if=\\\"stage.display\\\" class=\\\"overview-category__stage overview-category__stage--{{stage.id}}\\\" ng-repeat=\\\"stage in overview.stages\\\"><li ng-repeat=\\\"service in overview.services | category: category.id | stage: stage.id\\\"><card service=\\\"service\\\"></card></li></ul></div><filters></filters></div>\");}]);"],"sourceRoot":"/source/"}