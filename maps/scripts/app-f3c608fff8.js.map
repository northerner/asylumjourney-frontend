{"version":3,"sources":["scripts/app-f3c608fff8.js"],"names":["angular","module","data","$resource","services","url","providers","stages","categories","serviceUsers","issues","this","$inject","service","overview","templateUrl","restrict","directive","OverviewController","$scope","ngDialog","activate","getServices","getProviders","getStages","getCategories","getServiceUsers","get","$promise","then","response","vm","_embedded","showLoader","forEach","provider","display","stage","itemCategory","itemServiceUser","updateFilteredArray","filteredId","array","list","type","index","indexOf","push","splice","length","resetFilters","updateFilteredItem","item","filter","filtered","filterItems","filterId","filteredArray","id","resetFilter","filteredCategories","filteredStages","showCategoryFilters","showStageFilters","showServiceUserFilters","currentFilters","category","serviceUser","filteredServiceUsers","filteredProviders","filterStage","stageId","filterCategory","filterServiceUser","filterProvider","toggleIssues","showIssues","resetAll","expandCategoryFilters","a","expandStageFilters","expandServiceUserFilters","expandProviderFilters","open","template","scope","openDialog","closeFilters","controller","filters","card","controllerAs","CardController","$routeParams","$rootScope","checkRoute","dialogOpen","parseInt","serviceId","MainController","HomeController","items","itemStage","isInArray","some","e","itemProvider","runBlock","$location","deregistrationCallback","$on","next","current","closeAll","host","ga","path","run","routeConfig","$routeProvider","when","otherwise","redirectTo","config","constant","moment","$logProvider","debugEnabled","$templateCache","put"],"mappings":"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","file":"scripts/app-f3c608fff8.js","sourcesContent":["(function() {\n  'use strict';\n\n  angular\n    .module('asylumjourneyFrontend', ['ngAnimate', 'ngCookies', 'ngTouch', 'ngSanitize', 'ngMessages', 'ngAria', 'ngResource', 'ngRoute', 'ngDialog']);\n\n})();\n\n(function () {\n\t'use strict';\n\n\tangular\n\t\t.module('asylumjourneyFrontend')\n\t\t.service('data', data);\n\n\tfunction data($resource) {\n\n\t\tvar url = 'http://asylum-journey-dev.herokuapp.com/';\n\n\t\tthis.services = services;\n\t\tthis.providers = providers;\n\t\tthis.stages = stages;\n\t\tthis.categories = categories;\n\t\tthis.serviceUsers = serviceUsers;\n\t\tthis.issues = issues;\n\n\t\t///////////\n\n\t\tfunction services() {\n\t\t\treturn $resource(url + 'services');\n\t\t}\n\n\t\tfunction providers() {\n\t\t\treturn $resource(url + 'providers');\n\t\t}\n\n\t\tfunction stages() {\n\t\t\treturn $resource(url + 'stages');\n\t\t}\n\n\t\tfunction categories() {\n\t\t\treturn $resource(url + 'categories');\n\t\t}\n\n\t\tfunction serviceUsers() {\n\t\t\treturn $resource(url + 'service-users');\n\t\t}\n\n\t\tfunction issues() {\n\t\t\treturn $resource(url + 'issues');\n\t\t}\n\t}\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('asylumjourneyFrontend')\n    .directive('overview', overview);\n\n  function overview() {\n    var overview = {\n      templateUrl: 'app/components/overview/overview.html',\n      restrict: 'AE'\n    };\n    return overview;\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n  .module('asylumjourneyFrontend')\n  .controller('OverviewController', OverviewController);\n\n    function OverviewController(data, $scope, ngDialog) {\n        var vm = this;\n        var filteredCategories = [];\n        var filteredStages = [];\n\n        vm.services = [];\n        vm.filtered = false;\n        vm.showCategoryFilters = false;\n        vm.showStageFilters = false;\n        vm.showServiceUserFilters = false;\n        vm.showLoader = true;\n        vm.currentFilters = {\n            stage: false,\n            category: false,\n            serviceUser: false,\n            provider: false\n        };\n        vm.filteredServiceUsers = [];\n        vm.filteredProviders = [];\n\n        activate();\n\n        function activate() {\n            getServices();\n            getProviders();\n            getStages();\n            getCategories();\n            getServiceUsers();\n        }\n\n        function getServices() {\n            data.services().get().$promise.then(function(response) {\n\t\t\t\tvm.services = response._embedded.services;\n                vm.showLoader = false;\n\t\t\t});\n        }\n\n        function getProviders() {\n            data.providers().get().$promise.then(function(response) {\n\t\t\t\tvm.providers = response._embedded.providers;\n\n                angular.forEach(vm.providers, function(provider) {\n                    provider.display = true;\n                });\n\t\t\t});\n        }\n\n        function getStages() {\n            data.stages().get().$promise.then(function(response) {\n\t\t\t\tvm.stages = response._embedded.stages;\n\n                angular.forEach(vm.stages, function(stage) {\n                    stage.display = true;\n                });\n\n\t\t\t});\n\t\t}\n\n        function getCategories() {\n            data.categories().get().$promise.then(function(response) {\n\t\t\t\tvm.categories = response._embedded.categories;\n\n                angular.forEach(vm.categories, function(itemCategory) {\n                    itemCategory.display = true;\n                });\n\n\t\t\t});\n\t\t}\n\n        function getServiceUsers() {\n            data.serviceUsers().get().$promise.then(function(response) {\n                vm.serviceUsers = response._embedded.serviceUsers;\n\n                angular.forEach(vm.serviceUsers, function(itemServiceUser) {\n                    itemServiceUser.display = true;\n                });\n\n            });\n        }\n\n        function updateFilteredArray(filteredId, array, list, type) {\n            var index = array.indexOf(filteredId);\n\n            if (index === -1) {\n                array.push(filteredId);\n                return;\n            }\n\n            array.splice(index, 1);\n\n            if (!array.length) {\n                vm.resetFilters(array, list, type);\n            }\n        }\n\n        function updateFilteredItem(item, filter) {\n            item.display = filter;\n            item.filtered = filter;\n        }\n\n        function filterItems(filterId, filteredArray, list, type) {\n            vm.filtered = true;\n\n            angular.forEach(list, function(item) {\n\n                if (item.id === filterId) {\n                    updateFilteredItem(item, filteredArray.indexOf(filterId) === -1);\n                    return;\n                }\n\n                if (filteredArray.indexOf(item.id) !== -1) {\n                    return;\n                }\n\n                updateFilteredItem(item, false);\n\n            });\n\n            updateFilteredArray(filterId, filteredArray, list, type);\n        }\n\n        function resetFilter (list) {\n            angular.forEach(list, function(item) {\n                item.display = true;\n                item.filtered = false;\n            });\n        }\n\n        vm.filterStage = function(stageId) {\n            vm.currentFilters['stage'] = true;\n            filterItems(stageId, filteredStages, vm.stages, 'stage');\n        };\n\n\n        vm.filterCategory = function(filterId) {\n            vm.currentFilters['category'] = true;\n            filterItems(filterId, filteredCategories, vm.categories, 'category');\n        };\n\n        vm.filterServiceUser = function(filterId) {\n            vm.currentFilters['serviceUser'] = true;\n            filterItems(filterId, vm.filteredServiceUsers, vm.serviceUsers, 'serviceUser');\n        };\n\n        vm.filterProvider = function(filterId) {\n            vm.currentFilters['provider'] = true;\n            filterItems(filterId, vm.filteredProviders, vm.providers, 'provider');\n        };\n\n\t\tvm.toggleIssues = function () {\n\t\t\tvm.showIssues = !vm.showIssues;\n        };\n\n        vm.resetFilters = function(array, list, type) {\n            resetFilter(list);\n            vm.currentFilters[type] = false;\n            array = [];\n        };\n\n        vm.resetAll = function () {\n            resetFilter(vm.stages);\n            resetFilter(vm.categories);\n            resetFilter(vm.serviceUsers);\n            resetFilter(vm.providers);\n            filteredCategories = [];\n            filteredStages = [];\n            vm.filteredServiceUsers = [];\n            vm.filteredProviders = [];\n\t\t\tvm.showIssues = false;\n            vm.currentFilters = {\n                stage: false,\n                category: false,\n                serviceUser: false,\n                provider: false\n            };\n        };\n\n\t\t// toggle category filter\n        vm.expandCategoryFilters = function(a) {\n            vm.showCategoryFilters = !a;\n        };\n\n\t\t// toggle stage filter\n        vm.expandStageFilters = function(a) {\n            vm.showStageFilters = !a;\n        };\n\n        // toggle service user filter\n        vm.expandServiceUserFilters = function(a) {\n            vm.showServiceUserFilters = !a;\n        };\n\n        // toggle Provider filter\n        vm.expandProviderFilters = function() {\n            ngDialog.open({\n                template: 'app/components/filters/providers-overlay.html',\n                scope: $scope\n            });\n        };\n\n        vm.openDialog = function () {\n            ngDialog.open({\n                template: 'app/components/info-overlay/info.html',\n                scope: $scope\n            });\n        };\n\n\t\t// close all filters\n\t\tvm.closeFilters = function() {\n\t\t\tvm.showCategoryFilters = false;\n\t\t\tvm.showStageFilters = false;\n            vm.showServiceUserFilters = false;\n\t\t};\n       \n    }\n\n})();\n\n\n(function() {\n  'use strict';\n\n  angular\n    .module('asylumjourneyFrontend')\n    .directive('filters', filters);\n\n  function filters() {\n    var filters = {\n      templateUrl: 'app/components/filters/filters.html',\n      restrict: 'AE'\n    };\n    return filters;\n  }\n})();\n\n(function() {\n\t'use strict';\n\n\tangular\n\t\t.module('asylumjourneyFrontend')\n\t\t.directive('card', card);\n\n\tfunction card() {\n\t\tvar card = {\n\t\t\ttemplateUrl: 'app/components/card/card.html',\n\t\t\trestrict: 'AE',\n\t\t\tcontroller: 'CardController',\n\t\t\tcontrollerAs: 'card',\n\t\t\tscope: {\n\t\t\t\t\tservice: '='\n\t\t\t}\n\t\t};\n\t\treturn card;\n\t}\n})();\n\n(function() {\n  'use strict';\n\n  angular\n  .module('asylumjourneyFrontend')\n  .controller('CardController', CardController);\n\n    function CardController($scope, ngDialog, $routeParams, $rootScope) {\n        var vm = this;\n        vm.service = $scope.service;\n\t\tvm.openDialog = openDialog;\n\n        activate();\n\n        function activate() {\n\t\t\tcheckRoute();\n        }\n\n\t\tfunction checkRoute() {\n\t\t\t// permalink to modal\n\t\t\tif (!$rootScope.dialogOpen && (parseInt($routeParams.serviceId) === vm.service.id)) {\n\t\t\t\tvm.openDialog();\n\t\t\t\t$rootScope.dialogOpen = true;\n\t\t\t}\n\t\t}\n\n        function openDialog() {\n            ngDialog.open({\n                template: 'app/components/detail-overlay/detail.html',\n                scope: $scope\n            });\n        }\n    }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('asylumjourneyFrontend')\n    .controller('MainController', MainController);\n\n  /** @ngInject */\n  function MainController() {\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('asylumjourneyFrontend')\n    .controller('HomeController', HomeController);\n\n  /** @ngInject */\n  function HomeController() {\n  }\n})();\n\n(function () {\n\t'use strict';\n\n\tangular\n\t\t.module('asylumjourneyFrontend')\n\t\t.filter('stage', stage);\n\n\tfunction stage() {\n\n\t\treturn function stageFilter(items, stage) {\n\t\t\tvar filtered = [];\n\n\t\t\tangular.forEach(items, function(item) {\n\t\t\t\tangular.forEach(item._embedded.stages, function(itemStage) {\n\t\t\t\t\tif (itemStage.id === stage) {\n\t\t\t\t\t\tfiltered.push(item);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t\treturn filtered;\n\t\t}\n\t}\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('asylumjourneyFrontend')\n    .filter('serviceUser', serviceUser);\n\n  function isInArray (array, id) {\n    return array.some(function (e) { return e.id === id;});\n  }\n\n  function serviceUser() {\n\n    return function serviceUserFilter(items, serviceUser) {\n      if (!serviceUser.length) {return items;}\n\n      var filtered = [];\n\n      angular.forEach(items, function(item) {\n\n        angular.forEach(item._embedded.serviceUsers, function(itemServiceUser) {\n\n          angular.forEach(serviceUser, function (id) {\n\n            if (itemServiceUser.id === id) {\n\n              if ( isInArray(filtered, item.id) ) {\n                return;\n              }\n              filtered.push(item);\n              return;\n            }\n\n          });     \n\n        });\n      });\n\n      return filtered;\n    };\n  }\n})();\n\n(function () {\n  'use strict';\n\n  angular\n    .module('asylumjourneyFrontend')\n    .filter('provider', provider);\n\n  function isInArray (array, id) {\n    return array.some(function (e) { return e.id === id;});\n  }\n\n  function provider() {\n\n    return function providerFilter(items, provider) {\n      if (!provider.length) {return items;}\n\n      var filtered = [];\n\n      angular.forEach(items, function(item) {\n\n        angular.forEach(item._embedded.providers, function(itemProvider) {\n\n          angular.forEach(provider, function (id) {\n\n            if (itemProvider.id === id) {\n\n              if ( isInArray(filtered, item.id) ) {\n                return;\n              }\n              filtered.push(item);\n              return;\n            }\n\n          });     \n\n        });\n      });\n\n      return filtered;\n    };\n  }\n})();\n\n(function () {\n\t'use strict';\n\n\tangular\n\t\t.module('asylumjourneyFrontend')\n\t\t.filter('category', category);\n\n\tfunction category() {\n\n\t\treturn function categoryFilter(items, category) {\n\t\t\tvar filtered = [];\n\n\t\t\tangular.forEach(items, function(item) {\n\t\t\t\tangular.forEach(item._embedded.categories, function(itemCategory) {\n\t\t\t\t\tif (itemCategory.id === category) {\n\t\t\t\t\t\tfiltered.push(item);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\n\t\t\treturn filtered;\n\t\t}\n\t}\n})();\n\n(function() {\n\t'use strict';\n\n\tangular\n\t\t.module('asylumjourneyFrontend')\n\t\t.run(runBlock);\n\n\t/** @ngInject */\n\tfunction runBlock(ngDialog, $rootScope, $location) {\n\n\t\tvar deregistrationCallback = $rootScope.$on('$routeChangeStart', function(next, current) {\n\t\t\tif (next !== current){\n\t\t\t\tngDialog.closeAll();\n\t\t\t\t$rootScope.dialogOpen = false;\n\t\t\t}\n\t\t});\n\n\t\tif ($location.host() !== 'localhost') {\n\t\t\tga('create', 'UA-80488368-1', 'auto');\n\t\t\t$rootScope.$on('$routeChangeSuccess', function(){\n\t       ga('send', 'pageview', $location.path());\n\t    });\n\t\t}\n\n\t\t$rootScope.$on('$destroy', deregistrationCallback)\n\t}\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('asylumjourneyFrontend')\n    .config(routeConfig);\n\n  function routeConfig($routeProvider) {\n    $routeProvider\n      .when('/', {\n        templateUrl: 'app/home/home.html',\n        controller: 'HomeController',\n        controllerAs: 'home'\n      })\n      .when('/tool', {\n        templateUrl: 'app/main/main.html',\n        controller: 'MainController',\n        controllerAs: 'main'\n      })\n      .when('/service/:serviceId', {\n        templateUrl: 'app/main/main.html',\n        controller: 'MainController',\n        controllerAs: 'main'\n      })\n      .otherwise({\n        redirectTo: '/'\n      });\n  }\n\n})();\n\n/* global moment:false */\n(function() {\n  'use strict';\n\n  angular\n    .module('asylumjourneyFrontend')\n    .constant('moment', moment);\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('asylumjourneyFrontend')\n    .config(config);\n\n  /** @ngInject */\n  function config($logProvider) {\n    // Enable log\n    $logProvider.debugEnabled(true);\n  }\n\n})();\n\nangular.module(\"asylumjourneyFrontend\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/home/home.html\",\"<div class=\\\"home\\\"><div class=\\\"banner\\\"><div class=\\\"logo\\\"><h1>The Asylum Journey</h1><p>By Sheffugees</p></div><a class=\\\"button-link\\\" href=\\\"#/tool\\\">Get Started</a></div><div class=\\\"questions\\\"><h2>What is it?</h2><p>The Asylum Journey tool shows the different services available in Sheffield for asylum seekers and refugees at different stages of the asylum process - from arrival to the city to a positive decision, or to destitution.</p><h2>What problem does it solve?</h2><p>Services for asylum seekers and refugees are often complex and confusing. They are provided by many different statutory and voluntary organisations, and it can be difficult for any single organisation to know the whole picture. The Asylum Journey tool brings together information about these services in one place.</p><h2>Who is it for?</h2><p>The Asylum Journey is for people working for Sheffield-based statutory and voluntary organisations which provide advice and support for asylum seekers and refugees.</p><h2>Who made it?</h2><p>The Asylum Journey was created by members of the Sheffield tech community in partnership with volunteers from local refugee and asylum seeker organisations. It was initiated as part of the <a href=\\\"http://sheffugees.org\\\">Sheffugees Hackathon</a>.</p><h2>Who updates the content?</h2><p>The Sheffield City Council Locality Management Team, in partnership with a lead voluntary sector organisation, keeps the content of the Asylum Journey tool up to date, with input from local partners.</p><h2>What is the current status?</h2><p>This is the first version of the tool, and it is currently undergoing user testing. Feedback is welcome.</p><h2>What next?</h2><p>Partners will be invited to participate in a demonstration and provide comments for further change if necessary.</p></div></div>\");\n$templateCache.put(\"app/main/main.html\",\"<div class=\\\"container\\\"><overview></overview></div>\");\n$templateCache.put(\"app/components/card/card.html\",\"<a href=\\\"#/service/{{card.service.id}}\\\" ng-click=\\\"$event.preventDefault(); card.openDialog()\\\" class=\\\"card\\\" ng-class=\\\"{\\'card--has-issue\\': card.service._embedded.issues.length}\\\"><svg class=\\\"icon icon-warning\\\" ng-if=\\\"card.service._embedded.issues.length\\\"><use xlink:href=\\\"#icon-warning\\\"></use></svg><h3>{{ card.service.name }}</h3></a>\");\n$templateCache.put(\"app/components/detail-overlay/detail.html\",\"<article class=\\\"details\\\"><h2 class=\\\"details__heading\\\"><span ng-if=\\\"service._embedded.issues\\\" class=\\\"details__alert\\\"><svg class=\\\"icon icon-warning\\\"><use xlink:href=\\\"#icon-warning\\\"></use></svg><i>Warning</i></span> {{ service.name }}</h2><ul class=\\\"tag-list\\\"><li ng-repeat=\\\"stage in service._embedded.stages\\\" class=\\\"tag-list__tag tag-list__tag--stage-{{ stage.id }}\\\">{{ stage.name }}</li><li ng-repeat=\\\"category in service._embedded.categories\\\" class=\\\"tag-list__tag\\\">{{ category.name }}</li><li ng-repeat=\\\"serviceUser in service._embedded.serviceUsers\\\" class=\\\"tag-list__tag\\\">{{ serviceUser.name }}</li></ul><p ng-bind-html=\\\"service.description | linky\\\"></p><p ng-if=\\\"service.endDate\\\"><strong>End Date:</strong> {{ service.endDate | date }}</p><div ng-if=\\\"service._embedded.issues\\\"><h3 class=\\\"details__sub-heading\\\">Gaps or issues</h3><p ng-repeat=\\\"issue in service._embedded.issues\\\">{{ issue.name }}</p></div><div ng-if=\\\"service._embedded.providers\\\"><h3 class=\\\"details__sub-heading\\\">Providers</h3><div ng-repeat=\\\"provider in service._embedded.providers\\\" class=\\\"details__provider\\\"><h4 class=\\\"details__service-name\\\">{{ provider.name }}</h4><p>{{ provider.description }}</p><p ng-if=\\\"provider.phone\\\"><strong>Tel:</strong> {{ provider.phone }}</p><p ng-if=\\\"provider.email\\\"><strong>Email:</strong> <a href=\\\"mailto:{{ provider.email }}\\\">{{ provider.email }}</a></p><p ng-if=\\\"provider.website\\\"><strong>Website:</strong> <a href=\\\"{{ provider.website }}\\\">{{ provider.website }}</a></p><p ng-if=\\\"provider.address\\\"><strong>Address:</strong> {{ provider.address }}, {{ provider.postcode }}</p></div></div><a href=\\\"#/service/{{service.id}}\\\">Permanent link to this card</a></article>\");\n$templateCache.put(\"app/components/filters/filters.html\",\"<div class=\\\"filters\\\"><div class=\\\"filter\\\"><button type=\\\"button\\\" class=\\\"filter__toggle\\\" ng-class=\\\"{ \\'filter__toggle--active\\': overview.showIssues}\\\" ng-click=\\\"overview.toggleIssues()\\\"><svg class=\\\"icon icon-warning\\\"><use xlink:href=\\\"#icon-warning\\\"></use></svg>Gaps/issues</button></div><div class=\\\"filter\\\"><button type=\\\"button\\\" class=\\\"filter__toggle\\\" ng-class=\\\"{ \\'filter__toggle--active\\': overview.currentFilters.stage}\\\" ng-click=\\\"overview.expandStageFilters(overview.showStageFilters)\\\">Stage</button><ul class=\\\"filter__list\\\" ng-show=\\\"overview.showStageFilters\\\"><li class=\\\"filter__list-item\\\" ng-repeat=\\\"stage in overview.stages\\\"><button type=\\\"button\\\" class=\\\"filter__button\\\" ng-class=\\\"{ \\'filter__button--active\\': stage.filtered}\\\" ng-click=\\\"overview.filterStage(stage.id)\\\">{{stage.name}}</button></li></ul></div><div class=\\\"filter\\\"><button type=\\\"button\\\" class=\\\"filter__toggle toggle\\\" ng-class=\\\"{ \\'filter__toggle--active\\': overview.currentFilters.category}\\\" ng-click=\\\"overview.expandCategoryFilters(overview.showCategoryFilters)\\\">Category</button><ul class=\\\"filter__list\\\" ng-show=\\\"overview.showCategoryFilters\\\"><li class=\\\"filter__list-item\\\" ng-repeat=\\\"category in overview.categories\\\"><button type=\\\"button\\\" class=\\\"filter__button\\\" ng-class=\\\"{ \\'filter__button--active\\': category.filtered}\\\" ng-click=\\\"overview.filterCategory(category.id)\\\">{{category.name}}</button></li></ul></div><div class=\\\"filter\\\"><button type=\\\"button\\\" class=\\\"filter__toggle toggle\\\" ng-class=\\\"{ \\'filter__toggle--active\\': overview.currentFilters.serviceUser}\\\" ng-click=\\\"overview.expandServiceUserFilters(overview.showServiceUserFilters)\\\">Service user</button><ul class=\\\"filter__list\\\" ng-show=\\\"overview.showServiceUserFilters\\\"><li class=\\\"filter__list-item\\\" ng-repeat=\\\"serviceUser in overview.serviceUsers\\\"><button type=\\\"button\\\" class=\\\"filter__button\\\" ng-class=\\\"{ \\'filter__button--active\\': serviceUser.filtered}\\\" ng-click=\\\"overview.filterServiceUser(serviceUser.id)\\\">{{serviceUser.name}}</button></li></ul></div><div class=\\\"filter\\\"><button type=\\\"button\\\" class=\\\"filter__toggle toggle\\\" ng-class=\\\"{ \\'filter__toggle--active\\': overview.currentFilters.provider}\\\" ng-click=\\\"overview.expandProviderFilters(overview.showProviderFilters)\\\">Providers</button></div><div class=\\\"filter\\\"><button type=\\\"button\\\" class=\\\"button\\\" ng-click=\\\"overview.resetAll()\\\">Clear filters</button> <button ng-click=\\\"overview.openDialog()\\\" class=\\\"button help\\\">Help with this tool</button> <a href=\\\"http://goo.gl/forms/3helLLSBgK5qRvpg1\\\" target=\\\"_blank\\\" class=\\\"feedback button help\\\">Feedback</a></div></div><div class=\\\"filters__overlay\\\" ng-show=\\\"overview.showStageFilters || overview.showCategoryFilters || overview.showServiceUserFilters || overview.showProviderFilters\\\" ng-click=\\\"overview.closeFilters()\\\"></div>\");\n$templateCache.put(\"app/components/filters/providers-overlay.html\",\"<article class=\\\"details\\\"><h2 class=\\\"details__heading\\\">Providers</h2><ul class=\\\"filter__list filter__list--overlay\\\"><li class=\\\"filter__list-item\\\" ng-repeat=\\\"provider in overview.providers | orderBy: \\'name\\'\\\"><button type=\\\"button\\\" class=\\\"filter__button\\\" ng-class=\\\"{ \\'filter__button--active\\': provider.filtered}\\\" ng-click=\\\"overview.filterProvider(provider.id)\\\">{{provider.name}}</button></li></ul></article>\");\n$templateCache.put(\"app/components/info-overlay/info.html\",\"<div class=\\\"info\\\"><h2>The Asylum Journey Tool</h2><p>The Asylum Journey is a tool that shows the different services available for refugees and asylum seekers, organised according to the different stages of the asylum process from first arrival in the city to refugee status and beyond. The information can also be filtered by categories such as legal advice, housing, or education. Gaps in service and services at risk are highlighted.</p><h3 class=\\\"info__subtitle info__subtitle--stage-1\\\">Arrival</h3><p>Services for people newly arrived in Sheffield, including information about making an asylum claim and information for new claimants.</p><h3 class=\\\"info__subtitle info__subtitle--stage-2\\\">Awaiting Decision</h3><p>Services for people who have made an asylum claim and are awaiting a decision from the Home Office.</p><h3 class=\\\"info__subtitle info__subtitle--stage-3\\\">Positive Decision</h3><p>Services for people who have been granted leave to remain and have recourse to public funds and support.</p><h3 class=\\\"info__subtitle info__subtitle--stage-4\\\">Positive Decision - No recourse to public funds</h3><p>Services for people who have been granted leave to remain, but have been denied access to public funds and support.</p><h3 class=\\\"info__subtitle info__subtitle--stage-5\\\">Negative Decision with state support</h3><p>Services for people who have had their asylum claim refused but are still eligible for state support, for example families with children, unaccompanied children, or vulnerable adults.</p><h3 class=\\\"info__subtitle info__subtitle--stage-6\\\">Negative Decision - Destitute</h3><p>Services for people who have had their asylum claim refused and have no access to public funds or support.</p><h3 class=\\\"info__subtitle info__subtitle--stage-7\\\">Gateway Protection Programme/Syrian Resettlement Programme</h3><p>Services for people who moved to Sheffield under the Gateway Protection Programme or the Syrian Resettlement Programme and have already been granted refugee status.</p></div>\");\n$templateCache.put(\"app/components/overview/overview.html\",\"<div ng-controller=\\\"OverviewController as overview\\\" class=\\\"overview\\\" ng-class=\\\"{\\'show-issues\\': overview.showIssues}\\\"><ul class=\\\"overview-stages\\\"><li class=\\\"overview-stages__stage brand\\\"><h1><a ng-href=\\\"#/\\\" class=\\\"logo logo--small\\\">The Asylum Journey</a></h1></li><li ng-if=\\\"stage.display\\\" ng-repeat=\\\"stage in overview.stages\\\" class=\\\"overview-stages__stage overview-stages__stage--{{stage.id}}\\\"><span>{{stage.name}}</span></li></ul><div ng-if=\\\"overview.showLoader\\\" class=\\\"overview__loader\\\"><img ng-src=\\\"/app/images/loader-logo.svg\\\" alt=\\\"Loading\\\"> Loading...</div><div ng-if=\\\"category.display && !overview.showLoader\\\" ng-repeat=\\\"category in overview.categories\\\" class=\\\"overview-category\\\"><h2 class=\\\"overview-category__heading\\\">{{category.name}}</h2><ul ng-if=\\\"stage.display\\\" class=\\\"overview-category__stage overview-category__stage-{{stage.id}}\\\" ng-repeat=\\\"stage in overview.stages\\\"><li ng-repeat=\\\"service in overview.services | category: category.id | stage: stage.id | serviceUser: overview.filteredServiceUsers | provider: overview.filteredProviders\\\"><card service=\\\"service\\\"></card></li></ul></div><filters></filters></div>\");}]);"],"sourceRoot":"/source/"}